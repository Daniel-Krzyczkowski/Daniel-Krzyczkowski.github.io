---
title: "IoT with Azure Serverless and UWP"
excerpt: "In this article would like to present how to connect Azure Serverless services together with IoT device to display real time data in the UWP application."
---

<p align="center">
<img src="/images/devisland/article21/assets/ServerlessIoT1.png?raw=true" alt="IoT with Azure Serverless and UWP"/>
</p>

Recently I had a case where SignalR service was used toghether with ASP .NET Core Web API. I thought that it would be nice to check how SignalR service works with Azure Functions and UWP applications. This is why I created sample scenario where real time IoT data is displayed in the UPW application.


## Solution architecture

Here is the solution architecture. IoT device with sensors sends data to the Azure IoT Hub. Then Function app is triggered each time new data is sent to the IoT hub.
Once data is received, Function app connected with SignalR service is triggered. At the end UWP application can display real time data generated by the IoT device's sensors.

<p align="center">
<img src="/images/devisland/article21/assets/ServerlessIoT2.png?raw=true" alt="Image not found"/>
</p>

<p align="center">
<img src="/images/devisland/article21/assets/ServerlessIoT3.png?raw=true" alt="Image not found"/>
</p>


## IoT Hub config

Let's start from the Azure IoT Hub configuration. New IoT Hub instance has to be created - free plan is totally fine. Once IoT Hub is created, new device shoul be registered:

<p align="center">
<img src="/images/devisland/article21/assets/ServerlessIoT5.png?raw=true" alt="Image not found"/>
</p>

Copy connection string because we will use it in the next section to connect IoT device.


## IoT device config

For this project I used Azure IoT DevKit board (MxChip). It has many sensors including temperature and humidity. You can find instructions how to setup your machine to develop for MxChip. Sample project I used in this article can be found on my Github here.


## SignalR service config

Azure SignalR service enables sending real time messages.


## Device-data-trigger function config

Aaaa


## Messages function config

Aaaa


## Negotiate function config

Negotiate Azure Function is used to connect to the SignalR service and get connection info. This connection info will be used by UWP application to receive real time data.


## Azure resource group overview

My final resource group looks like below:

<p align="center">
<img src="/images/devisland/article21/assets/ServerlessIoT4.PNG?raw=true" alt="Image not found"/>
</p>


## UWP application config

I created Universal Windows 10 Platform application to display real time data from the IoT device. UWP application first calls "negotiate" function app and once connection info is returned, app is connected to the SignalR service hub.


## Summary

Aaa